<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Nivasiepura House ‚Äì Property Profile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #0f172a;
      --bg-alt: #111827;
      --card: #111827;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --success: #22c55e;
      --chip-bg: #1f2937;
      --chip-border: #374151;
      --radius-lg: 18px;
      --radius-pill: 999px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.45);
      --transition-fast: 0.2s ease-out;
      --font-main: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-main);
      background: radial-gradient(circle at top left, #1e293b 0, #020617 40%, #020617 100%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 32px 16px;
    }

    .app-shell {
      width: 100%;
      max-width: 1220px;
      background: linear-gradient(120deg, rgba(15,23,42,0.96), rgba(2,6,23,0.98));
      border-radius: 28px;
      border: 1px solid rgba(148, 163, 184, 0.15);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.6fr);
    }

    @media (max-width: 960px) {
      .app-shell {
        grid-template-columns: minmax(0, 1fr);
      }
      body {
        padding: 16px;
      }
    }

    .left-pane, .right-pane {
      padding: 24px 26px 26px;
    }

    .left-pane {
      border-right: 1px solid var(--border-subtle);
    }

    @media (max-width: 960px) {
      .left-pane {
        border-right: none;
        border-bottom: 1px solid var(--border-subtle);
      }
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
    }

    .title-block h1 {
      font-size: 1.4rem;
      letter-spacing: 0.03em;
      margin-bottom: 6px;
    }

    .title-block p {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .badges {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
      align-items: center;
    }

    .badge {
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 6px 11px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--success);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.25);
    }

    .badge-highlight {
      border-color: rgba(56, 189, 248, 0.6);
      color: var(--accent);
      background: rgba(15, 23, 42, 0.8);
    }

    /* Top summary card */
    .summary-card {
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.2) 0, rgba(15, 23, 42, 0.5) 35%, rgba(15, 23, 42, 1) 70%);
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      padding: 16px 18px;
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.7fr);
      gap: 16px;
      margin-bottom: 18px;
    }

    @media (max-width: 720px) {
      .summary-card {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .summary-primary h2 {
      font-size: 1.1rem;
      margin-bottom: 6px;
    }

    .summary-location {
      font-size: 0.88rem;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .summary-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .chip {
      font-size: 0.72rem;
      padding: 4px 9px;
      border-radius: var(--radius-pill);
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--text-muted);
    }

    .summary-metrics {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      font-size: 0.83rem;
    }

    .metric {
      padding: 10px 11px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 14px;
      border: 1px solid rgba(30, 64, 175, 0.4);
    }

    .metric-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      margin-bottom: 3px;
    }

    .metric-value {
      font-size: 0.98rem;
      font-weight: 600;
    }

    .price-highlight {
      font-size: 1.06rem;
      font-weight: 650;
      color: var(--accent);
    }

    .metric-sub {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      overflow-x: auto;
      padding-bottom: 4px;
      scrollbar-width: none;
    }

    .tabs::-webkit-scrollbar {
      display: none;
    }

    .tab {
      font-size: 0.8rem;
      padding: 7px 14px;
      border-radius: var(--radius-pill);
      border: 1px solid transparent;
      color: var(--text-muted);
      cursor: pointer;
      white-space: nowrap;
      background: transparent;
      transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
    }

    .tab:hover {
      background: rgba(15, 23, 42, 0.8);
      border-color: rgba(148, 163, 184, 0.4);
      color: var(--text-main);
      transform: translateY(-1px);
    }

    .tab.active {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: var(--accent);
    }

    /* Content sections */
    .sections {
      margin-top: 4px;
    }

    .section {
      display: none;
      animation: fadeIn 0.25s ease-out;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section-card {
      background: linear-gradient(145deg, var(--card), #020617);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 14px 16px 16px;
      margin-bottom: 10px;
    }

    .section-card h3 {
      font-size: 0.96rem;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-card h3 span.icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      background: rgba(148, 163, 184, 0.12);
      color: var(--accent);
    }

    .section-body {
      font-size: 0.86rem;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .section-body ul {
      list-style: none;
      margin-top: 4px;
    }

    .section-body li {
      padding-left: 18px;
      position: relative;
      margin-bottom: 4px;
    }

    .section-body li::before {
      content: "";
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
      position: absolute;
      left: 4px;
      top: 0.65em;
      transform: translateY(-50%);
    }

    .pill-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .pill {
      font-size: 0.78rem;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      background: var(--chip-bg);
      border: 1px solid var(--chip-border);
    }

    /* Right pane */
    .right-pane-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }

    .right-pane-header h2 {
      font-size: 0.96rem;
    }

    .toggle-btn {
      font-size: 0.75rem;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 5px 11px;
      background: rgba(15, 23, 42, 0.85);
      color: var(--text-muted);
      cursor: pointer;
      display: inline-flex;
      gap: 6px;
      align-items: center;
      transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
    }

    .toggle-btn:hover {
      background: rgba(15, 23, 42, 1);
      border-color: rgba(148, 163, 184, 0.8);
      color: var(--text-main);
      transform: translateY(-1px);
    }

    .fact-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 10px;
      margin-bottom: 14px;
    }

    .fact-card {
      background: var(--card);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 11px 12px;
      font-size: 0.83rem;
    }

    .fact-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .fact-value {
      font-size: 0.95rem;
    }

    .badge-inline {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 2px 8px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(52, 211, 153, 0.7);
      color: #6ee7b7;
      font-size: 0.72rem;
      background: rgba(6, 95, 70, 0.25);
      margin-top: 4px;
    }

    .badge-inline-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #6ee7b7;
    }

    /* Simple affordability helper */
    .helper-card {
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.25) 0, rgba(15, 23, 42, 1) 60%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(56, 189, 248, 0.4);
      padding: 12px 13px 13px;
      font-size: 0.85rem;
      margin-bottom: 12px;
    }

    .helper-card label {
      font-size: 0.74rem;
      color: var(--text-muted);
      display: block;
      margin-bottom: 4px;
    }

    .helper-card input[type="range"] {
      width: 100%;
      margin: 6px 0 10px;
    }

    .helper-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .helper-output {
      margin-top: 6px;
      font-size: 0.9rem;
    }

    .helper-output strong {
      color: var(--accent);
    }

    .note {
      font-size: 0.72rem;
      color: var(--text-muted);
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <main class="app-shell">
    <!-- LEFT PANE -->
    <section class="left-pane">
      <header class="header">
        <div class="title-block">
          <h1>Nivasiepura House ‚Äì Property Profiler</h1>
          <p>Structured view of all key data for investors, families, and end-users.</p>
        </div>
        <div class="badges">
          <div class="badge">
            <span class="badge-dot"></span> Active Listing
          </div>
          <div class="badge badge-highlight">
            Solar ‚Ä¢ Lake Proximity
          </div>
        </div>
      </header>

      <!-- SUMMARY CARD -->
      <section class="summary-card">
        <div class="summary-primary">
          <h2>2-Storey SWAN-Type House with 5 kW Solar</h2>
          <p class="summary-location">
            Nivasiepura Housing Project, P Block ‚Ä¢ Ekala, Ja-Ela
          </p>
          <div class="summary-tags">
            <span class="chip">3 BR ‚Ä¢ 2,400 sq.ft</span>
            <span class="chip">8.5 perches</span>
            <span class="chip">Gated-style community</span>
            <span class="chip">Close to Lake & Shops</span>
          </div>
        </div>
        <div class="summary-metrics">
          <div class="metric">
            <div class="metric-label">Asking Price</div>
            <div class="metric-value price-highlight">LKR 32.5 Mn</div>
            <div class="metric-sub">Negotiation potential subject to owner</div>
          </div>
          <div class="metric">
            <div class="metric-label">Solar & Energy</div>
            <div class="metric-value">5 kW System</div>
            <div class="metric-sub">~500 units/month ‚Ä¢ ~LKR 37 per unit (CEB)</div>
          </div>
        </div>
      </section>

      <!-- TABS -->
      <nav class="tabs" id="tabs">
        <button class="tab active" data-target="section-location">Location & Community</button>
        <button class="tab" data-target="section-house">House & Layout</button>
        <button class="tab" data-target="section-amenities">Amenities & Facilities</button>
        <button class="tab" data-target="section-access">Access & Connectivity</button>
        <button class="tab" data-target="section-investor">Investor View</button>
      </nav>

      <!-- SECTIONS -->
      <section class="sections">
        <!-- Location & Community -->
        <div class="section active" id="section-location">
          <article class="section-card">
            <h3><span class="icon">üìç</span> Location Snapshot</h3>
            <div class="section-body">
              <p>
                The property is located inside the <strong>Nivasiepura Housing Project</strong>,
                a large, greenery-focused residential scheme spanning approximately
                <strong>135 acres</strong> with around <strong>1,105 houses</strong>.
              </p>
              <ul>
                <li>Highly secure, planned residential environment with wide internal roads</li>
                <li>Strong neighborhood culture and community-oriented living</li>
                <li>Near the Air Force Camp at Ekala, Ja-Ela</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Green surroundings</span>
                <span class="pill">Secure environment</span>
                <span class="pill">Community living</span>
                <span class="pill">Wide road frontage</span>
              </div>
            </div>
          </article>
        </div>

        <!-- House & Layout -->
        <div class="section" id="section-house">
          <article class="section-card">
            <h3><span class="icon">üè†</span> House Configuration</h3>
            <div class="section-body">
              <p>
                Two-storey <strong>SWAN-type</strong> house located in <strong>P Block</strong>, close to the lake and shops.
              </p>
              <ul>
                <li><strong>Land:</strong> 8.5 perches (approx.)</li>
                <li><strong>Built-up area:</strong> ~2,400 sq.ft</li>
                <li><strong>Bedrooms:</strong> 3 (all air-conditioned)</li>
                <li><strong>Living:</strong> 2 large living halls + dedicated dining area</li>
                <li><strong>Outdoor:</strong> Veranda + balcony</li>
                <li><strong>Kitchen:</strong> With fitted pantry cupboards</li>
                <li><strong>Bathrooms:</strong> 2 large bathrooms</li>
                <li><strong>Staff:</strong> Separate servant room + servant toilet</li>
                <li><strong>Utilities:</strong> Hot water, surrounding boundary wall</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Family home</span>
                <span class="pill">Staff accommodation</span>
                <span class="pill">Air-conditioned bedrooms</span>
              </div>
            </div>
          </article>

          <article class="section-card">
            <h3><span class="icon">üöó</span> Parking & Outdoor Space</h3>
            <div class="section-body">
              <ul>
                <li>Front landscaped garden enhancing curb appeal</li>
                <li>Parking for 2 vehicles inside the front garden</li>
                <li>Approx. 35 ft wide road frontage allowing 3 additional vehicles outside</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Landscaped front garden</span>
                <span class="pill">Up to 5 vehicle parking</span>
              </div>
            </div>
          </article>

          <article class="section-card">
            <h3><span class="icon">‚ö°</span> Solar & Energy Profile</h3>
            <div class="section-body">
              <ul>
                <li>Installed <strong>5 kW solar power system</strong></li>
                <li>Approximate output around <strong>500 units per month</strong> (as per owner)</li>
                <li>CEB pays around <strong>LKR 37 per unit</strong> under current agreement</li>
              </ul>
              <p class="note">
                Note: Buyers should independently verify current tariff rates, net metering/net plus scheme type, and exact monthly outputs.
              </p>
            </div>
          </article>
        </div>

        <!-- Amenities & Facilities -->
        <div class="section" id="section-amenities">
          <article class="section-card">
            <h3><span class="icon">üè¨</span> In-Project Shops & Services</h3>
            <div class="section-body">
              <p>
                Nivasiepura offers an extensive set of daily-living conveniences within or very close to the project:
              </p>
              <ul>
                <li>Mini supermarkets, groceries, bakeries</li>
                <li>Pharmacy, medical centre, and laboratory</li>
                <li>Laundry services and bookshops</li>
                <li>Communication centres and ATMs</li>
                <li>Restaurants and food outlets</li>
                <li>Salon, vegetable shop, fish market, meat shops, gas shops</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Walkable amenities</span>
                <span class="pill">Healthcare nearby</span>
                <span class="pill">Daily essentials on-site</span>
              </div>
            </div>
          </article>

          <article class="section-card">
            <h3><span class="icon">üéØ</span> Lifestyle & Recreation</h3>
            <div class="section-body">
              <ul>
                <li>Gym and swimming pool</li>
                <li>Children‚Äôs park and playgroup facilities</li>
                <li>Four badminton courts and a basketball court</li>
                <li>Jogging track within the project</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Active lifestyle</span>
                <span class="pill">Child-friendly</span>
                <span class="pill">Sports & wellness</span>
              </div>
            </div>
          </article>

          <article class="section-card">
            <h3><span class="icon">üßπ</span> Services & Community</h3>
            <div class="section-body">
              <ul>
                <li>Daily garbage and waste food collection</li>
                <li>Friendly and welcoming neighborhood</li>
                <li>Public transport route 187 to Colombo</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Managed environment</span>
                <span class="pill">Public transport access</span>
              </div>
            </div>
          </article>
        </div>

        <!-- Access & Connectivity -->
        <div class="section" id="section-access">
          <article class="section-card">
            <h3><span class="icon">üõ£Ô∏è</span> Connectivity</h3>
            <div class="section-body">
              <ul>
                <li>Approximately 15 minutes to Ja-Ela town and expressway/highway entrance</li>
                <li>Approximately 15 minutes to Bandaranaike International Airport</li>
                <li>Approximately 30 minutes‚Äô access to schools in Negombo, Colombo, and Gampaha</li>
                <li>School and staff transport to Colombo available from the area</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Airport access</span>
                <span class="pill">Expressway nearby</span>
                <span class="pill">Multiple school zones</span>
              </div>
            </div>
          </article>
        </div>

        <!-- Investor View -->
        <div class="section" id="section-investor">
          <article class="section-card">
            <h3><span class="icon">üìà</span> Investor / End-User Perspective</h3>
            <div class="section-body">
              <p>
                This property suits both long-term end-users and investors seeking rental or capital appreciation potential in a large, established housing project.
              </p>
              <ul>
                <li>Appealing to airport/aviation, logistics, and professionals working in Negombo‚ÄìColombo‚ÄìGampaha corridor</li>
                <li>Solar installation reduces long-term electricity costs, improving effective yield</li>
                <li>Strong community infrastructure and daily conveniences enhance tenant demand</li>
              </ul>
              <div class="pill-list">
                <span class="pill">Ready-to-move</span>
                <span class="pill">Low utility overheads</span>
                <span class="pill">Attractive for rentals</span>
              </div>
            </div>
          </article>
        </div>
      </section>
    </section>

    <!-- RIGHT PANE -->
    <section class="right-pane">
      <header class="right-pane-header">
        <h2>Key Facts & Quick Calculators</h2>
        <button class="toggle-btn" id="toggleViewBtn">
          <span>Toggle: Family / Investor View</span>
        </button>
      </header>

      <!-- Fact cards -->
      <section class="fact-grid">
        <article class="fact-card">
          <div class="fact-label">Property Type</div>
          <div class="fact-value">Two-storey SWAN-type house in a large housing project</div>
        </article>
        <article class="fact-card">
          <div class="fact-label">Land & Built-up</div>
          <div class="fact-value">8.5 perches ‚Ä¢ ~2,400 sq.ft</div>
        </article>
        <article class="fact-card">
          <div class="fact-label">Bedrooms / Bathrooms</div>
          <div class="fact-value">3 BR (all AC) ‚Ä¢ 2 large bathrooms + staff facilities</div>
        </article>
        <article class="fact-card">
          <div class="fact-label">Parking</div>
          <div class="fact-value">2 vehicles inside, ~3 outside (35 ft road width)</div>
        </article>
        <article class="fact-card">
          <div class="fact-label">Solar System</div>
          <div class="fact-value">
            5 kW ‚Ä¢ ~500 units/month
            <div class="badge-inline">
              <span class="badge-inline-dot"></span>
              <span>Potential monthly savings / income</span>
            </div>
          </div>
        </article>
        <article class="fact-card">
          <div class="fact-label">Condition</div>
          <div class="fact-value">Described as a well-maintained house in good condition</div>
        </article>
      </section>

      <!-- Simple affordability / EMI helper -->
      <section class="helper-card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;">
          <strong>Approximate Monthly Installment Helper</strong>
          <span style="font-size:0.7rem; color:var(--text-muted);">For reference only</span>
        </div>
        <label for="downPaymentRange">
          Down payment (as % of price) ‚Äì Asking: LKR 32.5 Mn
        </label>
        <input id="downPaymentRange" type="range" min="10" max="60" step="5" value="30">
        <div class="helper-meta">
          <span id="downPaymentLabel">Down payment: 30%</span>
          <span id="loanLabel">Loan: 70%</span>
        </div>
        <div class="helper-output" id="emiOutput">
          Estimated monthly installment over 15 years at 15% p.a: <strong>calculating‚Ä¶</strong>
        </div>
        <p class="note">
          This is a very rough indicative calculator using simple assumptions
          (fixed rate, 15 years). Buyers must obtain actual quotations from banks/financial institutions.
        </p>
      </section>

      <!-- Notes -->
      <section class="fact-card">
        <div class="fact-label">Notes for Buyers / Agents</div>
        <div class="fact-value">
          <ul style="margin-top:4px; padding-left:16px; color:var(--text-muted); font-size:0.82rem; line-height:1.65;">
            <li>Verify the latest government valuation report and title documents.</li>
            <li>Check exact solar scheme type (Net, Net Plus, Net Accounting) and tariff with CEB.</li>
            <li>Confirm all community fees, maintenance charges, and any association rules at Nivasiepura.</li>
          </ul>
        </div>
      </section>
    </section>
  </main>

  <script>
    // Tab switching logic
    const tabs = document.querySelectorAll(".tab");
    const sections = document.querySelectorAll(".section");

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        const target = tab.getAttribute("data-target");

        tabs.forEach(t => t.classList.remove("active"));
        sections.forEach(s => s.classList.remove("active"));

        tab.classList.add("active");
        document.getElementById(target).classList.add("active");
      });
    });

    // Toggle view label (family / investor)
    const toggleBtn = document.getElementById("toggleViewBtn");
    let isFamilyView = true;
    toggleBtn.addEventListener("click", () => {
      isFamilyView = !isFamilyView;
      toggleBtn.querySelector("span").textContent = isFamilyView
        ? "Toggle: Family / Investor View"
        : "Toggle: Investor / Family View";
    });

    // Simple EMI helper
    const price = 32_500_000; // LKR
    const downPaymentRange = document.getElementById("downPaymentRange");
    const downPaymentLabel = document.getElementById("downPaymentLabel");
    const loanLabel = document.getElementById("loanLabel");
    const emiOutput = document.getElementById("emiOutput");

    function formatNumber(num) {
      return num.toLocaleString("en-LK", { maximumFractionDigits: 0 });
    }

    function calculateEMI() {
      const dpPercent = Number(downPaymentRange.value);
      const loanPercent = 100 - dpPercent;
      const dpAmount = (price * dpPercent) / 100;
      const loanAmount = price - dpAmount;

      const years = 15;
      const annualRate = 0.15;
      const monthlyRate = annualRate / 12;
      const n = years * 12;

      // Standard EMI formula: E = P * r * (1+r)^n / ((1+r)^n - 1)
      const factor = Math.pow(1 + monthlyRate, n);
      const emi = loanAmount * monthlyRate * factor / (factor - 1);

      downPaymentLabel.textContent = `Down payment: ${dpPercent}% (LKR ${formatNumber(dpAmount)})`;
      loanLabel.textContent = `Loan: ${loanPercent}% (LKR ${formatNumber(loanAmount)})`;
      emiOutput.innerHTML =
        `Estimated monthly installment over ${years} years at 15% p.a: <strong>LKR ${formatNumber(emi)}</strong>`;
    }

    downPaymentRange.addEventListener("input", calculateEMI);
    calculateEMI();
  </script>
</body>
</html>